---
sidebar_position: 1
---
# 5-1. Hub- Layer
## Outline
Hub-LayerはOasysにおけるLayer 1のEVM互換Public Blockchainです。ノード実装はgeth(Go Ethereum)をforkしたものに必要最小限の修正をしたものを利用します。consensus algorithmとしてはPoS(Proof of Stake)を採用し、1000万OAS以上のStakingという条件さえ満たせば誰でもノード運用者(validator)になれることでblockchain運用の公共性を担保します。また、安定的なblockchain利用環境を提供するために、applicationの実行はVerse-Layerに任せることとし、Hub-Layerはrollup情報の記録・FT/NFTの管理・bridge情報の管理などの限定された用途に利用を限定します。Hub-Layer上に直接スマートコントラクトをデプロイすることはできません。
## Mining
![Mining](/img/docs/technologies/mining.png)
Mining Spec
Hub-Layerはapplicationを直接動作させるわけではなく、Oasysに集まるデータをセキュアかつ安定的に保存することが求められるlayerです。globalに分散されたノードに情報が安定して伝搬されるように過度に短い時間でblock生成することを避け、15秒毎にBlock生成することにします。また、意味が薄いトランザクション実行を避けるため過度に低いgas代を避け、適切な最低gas代を設定することにします。実勢価格に依存しますが、送金処理で約1centの最低gas代になることを目標にします。
block生成はvalidatorと呼ばれるノードによって行います。block生成するvalidatorの選出にはPoSを採用し、stakingされたOASトークンの多さに応じてランダム（weighted random shuffling）に選出されます。5760ブロック（約1日）毎にepochと呼ばれる期間を設定し、各epochの最終blockが実行されるタイミングで今回epockのstaking rewardの決定や次回validatorの決定（新たなvalidatorの組入や既存validatorの離脱）が行われます。これらvalidator情報は、特別なvalidator contractによって管理されます。
validatorの運用報酬は、staking rewardのcommission feeとgas feeの2つがあります。staking rewardは目標ARRから計算され、validatorはそのうちcommission rateに応じたfeeを獲得できます。gas feeの取り扱いについてはEthereumに追従し、EIP-1559を採用します。
## Validator
validator contractを通じて1000万OAS以上のstakingがあれば、誰もがvalidatorになることができます。まずvalidator候補は自分のアドレスをvalidator contractに登録します。OASトークンホルダーはどのvalidatorまたはvalidator候補アドレスに対してもstakeすることが可能ですし、いつでもunstakeすることが可能です。stakeやunstakeは今回epochのlast blockで反映されます。validator候補は自分のアドレスに対するstaking量が合計1000万OAS以上になった状態でvalidator申告することにより、次回epochからvalidatorになれます。逆に合計staking量が1000万OASを下回ったepochから自動的にvalidatorは離脱します。
validatorは登録したブロック署名アドレスを用いて署名します。何らかの理由により稼働していないvalidatorが存在する場合、当該validatorが怠ったblock生成作業は次のvalidatorが肩代わりして実行します。validatorの稼働率によりepoch毎にstaking rewardが決定されます。例えばずっと非稼働の場合は、staking rewardを獲得することはできませんが、stakingされたOASが毀損することはありません。block生成を怠った回数が閾値を超えたvalidatorは一定epochの間、block生成対象から除外され非稼働とみなされます。
## Smart Contract
新規スマートコントラクトのデプロイはデプロイはできません。Oasys全体で認められたスマートコントラクトのみデプロイされます。トランザクション実行はOASでgasを支払えば実行可能です。認められたスマートコントラクトとしては、FT/NFTに関わるもの・Rollupに関わるもの・Bridgeに関わるものがあります。
